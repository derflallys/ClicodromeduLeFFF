<div class="centerDiv" *ngIf="loading.status">
  <mat-progress-spinner
          [color]="loading.color"
          [mode]="loading.mode"
          [value]="loading.value">
  </mat-progress-spinner>
</div>
<div *ngIf="!loading.status && errorRequest" class="error">Une erreur est survenue.</div>
<div *ngIf="!loading.status && !errorRequest">
  <div class="content">
    <h1>{{title}}</h1>
    <div class="error" *ngIf="error">
      Une erreur s'est produite.
    </div>
    <form (ngSubmit)="onSubmit()" [formGroup]="addRule">
      <mat-form-field>
        <mat-select placeholder="Catégorie" formControlName="category" [(value)]="categorySelected"  >
          <mat-option *ngFor="let category of categories"  [value]="category.id">{{category.name}}</mat-option>
        </mat-select>
      </mat-form-field>

      <mat-form-field>
        <input type="number" matInput placeholder="Niveau d'application" formControlName="applicationLevel">
      </mat-form-field>

      <div class="tags">
        <h3>Tags liés aux mot</h3>
        <div formArrayName="wordTags" *ngFor="let tag of addRule.controls['wordTags'].controls; let i = index">
          <mat-form-field  [formGroupName]="i">
            <input matInput placeholder="valeur du tag" formControlName="valueTag">
          </mat-form-field>
        </div>
        <button mat-raised-button color="primary" type="button" (click)="addWordTag()"><mat-icon class="icon">add</mat-icon> Ajouter un tag</button>
      </div>
      <div class="tags">
        <h3>Tags d'application de la règle</h3>
        <div formArrayName="combinationTags" *ngFor="let tag of addRule.controls['combinationTags'].controls; let j = index">
          <mat-form-field class="result-full-width" [formGroupName]="j">
            <input matInput placeholder="valeur tag" formControlName="valueCombination">
          </mat-form-field>
        </div>
        <button mat-raised-button color="primary" type="button" (click)="addCombinationTag()"><mat-icon class="icon">add</mat-icon> Ajouter un tag dans l'association</button>
      </div>

      <div class="tags">
        <h3>Résultat de la règle</h3>
        <tr>
          <td><mat-form-field class="result-full-width">
            <input matInput placeholder="Préfixe" formControlName="prefix">
          </mat-form-field></td>
          <td><mat-form-field class="result-full-width">
            <input matInput placeholder="Mot" [disabled]="true" >
          </mat-form-field></td>
          <td><mat-form-field class="result-full-width">
            <input matInput placeholder="Suffixe" formControlName="suffix">
          </mat-form-field></td>
        </tr>
      </div>
      <button mat-raised-button color="warn" type="submit"><mat-icon class="icon">save</mat-icon> Enregistrer la règle</button>
    </form>
  </div>
</div>

